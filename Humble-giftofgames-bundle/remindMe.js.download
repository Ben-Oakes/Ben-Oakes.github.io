function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}define("lib/hbTemplate!remindMe/templates.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<script id="remind-me-button-template" type="text/html">\n  <div class="remind-me-button-wrapper">\n    <div class="js-remind-me-button remind-me-button">\n  <% if (!isReminded) { %>\n      <i class="hb hb-bell-o"></i> Remind Me\n  <% } else { %>\n      <i class="hb hb-bell"></i> You\'ll be Reminded\n  <% } %>\n      <i class="hb hb-chevron-right"></i>\n    </div>\n    <div class="js-remind-me-message-holder"></div>\n  </div>\n</script>\n\n<script id="remind-me-modal-template" type="text/html">\n  <div class="generic-popup content">\n    <h1>Remind Me</h1>\n    <p>You\'ve reached this page from a Remind Me link.</p>\n  <% if (!isReminded) { %>\n    <p>Would you like to be sent a reminder email before <%= humanName %>\n      <%= (isMonthly ? \'Bundle is released\' : \'ends\') %>?</p>\n  <% } else { %>\n    <p>You are already scheduled to receive a reminder email before <%= humanName %>\n    <%= (isMonthly ? \'Bundle is released\' : \'ends\') %>.\n    Would you like to unschedule this reminder?</p>\n  <% } %>\n    <a class="button-link js-remindme">\n      <span class="green-button"><%= (isReminded ? \'Unschedule\' : \'Send me a reminder\') %></span>\n    </a>\n    <a class="button-link js-close">\n      <span class="gray-button">Never mind</span>\n    </a>\n  </div>\n</script>\n\n<script id="remind-me-processing-template" type="text/html">\n  <div class="remind-me-button-wrapper">\n    <div class="remind-me-button">\n      <i class="inline-spinner dark-spinner"></i> Processing...\n    </div>\n    <div class="js-remind-me-message-holder"></div>\n  </div>\n</script>\n\n<script id="remind-me-message-template" type="text/html">\n  <div class="remind-me-message">\n    <div class="js-close-message close-message">\n      <i class="hb hb-times-circle"></i>\n    </div>\n    <div class="js-remind-me-message-text"></div>\n  </div>\n</script>\n\n<script id="remind-me-fail-template" type="text/html">\n  <div class="remind-me-message-title">Error!</div>\n  <p>There was an error contacting the server.</p>\n</script>\n\n<script id="remind-me-toosoon-template" type="text/html">\n  <div class="remind-me-message-title">Reminder not set</div>\n  <p>This bundle is ending too soon to set a reminder. Hurry and buy now!</p>\n</script>\n'.replace(/xSTATIC_URLx/g,t)}()}),define("util/templating",["module","underscore","util/main"],function(e,t,n){"use strict";function o(e,n){return e.replace(/<%\s*include\(\s*['"]([^'"]+)['"](?:\s*,\s*({[^}]+}))?\s*\)\s*%>/g,function(e,i,s){if(t.contains(n,i))throw new Error("Cycle detected: "+i);var a=document.getElementById(i),r=a?a.innerHTML:"";s&&(r="<% with("+s+") { %>"+r+"<% } %>");var c=n.slice(0);return c.push(i),o(r.trim(),c)})}function i(e,t){t=t||{};var n=document.getElementById(e);if(!n)throw new Error('no template with id "'+e+'"');var o=n?n.innerHTML:"";return s(o,t)}function s(e,n){n=t.extend({},n);var i=o(e.trim(),[]),e=t.template(i);t.extend(n,c);try{return e(n)}catch(e){throw Raven.captureException(e),e}}var a=function(e){return t.template(o(jQuery(e).html().trim(),[]))},r=e.config().STATIC_URL,c={STATIC_URL:r,moneyfmt:n.moneyfmt};return{renderTemplateId:i,renderTemplate:s,getTemplate:a}}),define("lib/require-text!remindMe/css_dist/remindMe.css",[],function(){return'.hidden { display: none !important; }\n.no-style-list { margin: 0; padding: 0; list-style: none; }\n.transparent { opacity: 0; }\n.spinner { background: url("//humblebundle-a.akamaihd.net/static/hashed/26faf55c6e36ba3b1a57f9001942059fe05050f2.gif") center center no-repeat; width: 32px; height: 32px; vertical-align: middle; display: block; }\n.spinner.dark-spinner { background-image: url("//humblebundle-a.akamaihd.net/static/hashed/d75f6277a2eb64ec4986978ea3955e9d2434e389.gif"); }\n.inline-spinner { background: url("//humblebundle-a.akamaihd.net/static/hashed/26faf55c6e36ba3b1a57f9001942059fe05050f2.gif") no-repeat; background-size: contain; width: 1em; height: 1em; position: relative; top: 1px; display: inline-block; }\n.inline-spinner.dark-spinner { background-image: url("//humblebundle-a.akamaihd.net/static/hashed/d75f6277a2eb64ec4986978ea3955e9d2434e389.gif"); }\n.remind-me-button-wrapper { position: relative; display: inline-block; text-align: right; margin: 0 auto; clear: both; }\n.remind-me-message { position: absolute; background: white; width: 300px; left: -30px; top: -25px; padding: 10px; z-index: 200; }\n.remind-me-message .remind-me-message-title { color: green; font-size: 16px; text-align: center; }\n.remind-me-message .close-message { position: absolute; font-size: 14px; }\n.remind-me-button { color: white; font-size: 14px; cursor: pointer; }\n'}),define("constants/csrfConstants",["require"],function(e){return{CSRF_COOKIE_KEY:"csrf_cookie",CSRF_COOKIE_VERSION:1,CSRF_FORM_KEY:"_le_csrf_token",CSRF_HEADER_KEY:"CSRF-Prevention-Token"}}),define("util/csrfUtils",["constants/csrfConstants"],function(e){function t(){var t=document.cookie,n=t.lastIndexOf(e.CSRF_COOKIE_KEY);n=n+e.CSRF_COOKIE_KEY.length+1;var t=t.slice(n),o="";if(t.length){var i=t.indexOf(";");o=i>-1?t.slice(0,i):t}return o}return{getCsrf:t,formKey:e.CSRF_FORM_KEY,headerKey:e.CSRF_HEADER_KEY}}),define("common/DOMLessView",["require","marionette","util/templating"],function(e){"use strict";var t=e("marionette"),n=e("util/templating"),o=t.ItemView.extend({_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new t.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var o=this.mixinTemplateHelpers(this.serializeData()),i=n.renderTemplate(e,o);return this.attachElContent(i),this}}});return o}),define("lib/hbTemplate!account/templates/AccountStart.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="full-logo">\n  <img src="xSTATIC_URLx/static/hashed/2601f8ca3aefe063e1e1c0fbdb6ef0ecc2c7f9f2.svg" alt="Humble Bundle">\n</div>\n<button class="button large account-cta green js-account-login">Log in</button>\n<br>\n<br>\n<button class="button large account-cta green js-account-signup">Sign up</button>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/AccountStartView",["require","common/DOMLessView","hbtemplate!./templates/AccountStart.html"],function(e){"use strict";var t=e("common/DOMLessView"),n=e("hbtemplate!./templates/AccountStart.html"),o=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"onRender",value:function(){$(".account-modal-outer").addClass("account-reveal-background-image")}},{key:"onBeforeDestroy",value:function(){$(".account-modal-outer").removeClass("account-reveal-background-image")}}]),t}(t);return o.prototype.className="account-view",o.prototype.template=n,o}),define("constants/skipCodes",["require"],function(e){return{SKIP_CODE_SECONDS:300}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/collections/Validators",["require","backbone"],function(e){"use strict";var t=e("backbone"),n=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"validate",value:function(e){var t=this.get("validation")(e.get(this.id));return this.set("valid",t),t&&this.set("show_error",!1),t}}]),t}(t.Model);n.prototype.defaults={validation:function(){return!0},valid:!0,show_error:!1};var o=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"validate",value:function(e,t){t=t||[];var n=!0;return this.each(function(o){var i=o.validate(e);!i&&t.indexOf(o.id)>-1&&o.set("show_error",!0),i||(n=!1)}),n}}]),t}(t.Collection);return o.prototype.model=n,o}),define("lib/hbTemplate!account/templates/SubmitButton.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<button type="submit" name="button"\n       class="button large account-cta<% if (valid && !loading) { %> green<% } %>"\n       <% if (!valid || loading) { %> disabled<% } %>>\n       <% if (!loading) { %>\n         <%= cta %>\n      <% } else { %>\n        \n        <div class="sk-circle">\n          <div class="sk-circle1 sk-child"></div>\n          <div class="sk-circle2 sk-child"></div>\n          <div class="sk-circle3 sk-child"></div>\n          <div class="sk-circle4 sk-child"></div>\n          <div class="sk-circle5 sk-child"></div>\n          <div class="sk-circle6 sk-child"></div>\n          <div class="sk-circle7 sk-child"></div>\n          <div class="sk-circle8 sk-child"></div>\n          <div class="sk-circle9 sk-child"></div>\n          <div class="sk-circle10 sk-child"></div>\n          <div class="sk-circle11 sk-child"></div>\n          <div class="sk-circle12 sk-child"></div>\n        </div>\n      <% } %></button>\n'.replace(/xSTATIC_URLx/g,t)}()}),define("lib/hbTemplate!account/templates/ErrorBox.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="js-close-message close-message">\n  <i class="hb hb-times"></i>\n</div>\n<div class="error-message"><%= message %></div>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/BaseAccountView",["require","lib/jquery/full","lib/lodash","backbone","constants/skipCodes","common/DOMLessView","util/csrfUtils","account/collections/Validators","hbtemplate!./templates/SubmitButton.html","hbtemplate!./templates/ErrorBox.html"],function(e){"use strict";var t=e("lib/jquery/full"),n=e("lib/lodash"),o=e("backbone"),i=e("constants/skipCodes"),s=e("common/DOMLessView"),a=e("util/csrfUtils"),r=e("account/collections/Validators"),c=e("hbtemplate!./templates/SubmitButton.html"),l=e("hbtemplate!./templates/ErrorBox.html"),u=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"initialize",value:function(){this.listenTo(this.model,"change:valid",this.render.bind(this)),this.listenTo(this.model,"change:loading",this.render.bind(this))}}]),t}(s);u.prototype.template=c;var d=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"initialize",value:function(e){var t=e.errorMessage;this.errorMessage=t,this.listenTo(this.model,"change:show_error",this.toggle.bind(this))}},{key:"toggle",value:function(){this.model.get("show_error")?this.$el.show():this.$el.hide()}},{key:"showErrorMessage",value:function(){this.errorMessage.set({message:this.model.get("submit_message")||this.model.get("message"),show_message:!0}),this.model.unset("submit_message")}}]),t}(o.View);d.prototype.events={click:"showErrorMessage"};var p=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"initialize",value:function(){this.listenTo(this.model,"change:show_message",this.render.bind(this)),this.listenTo(this.model,"change:message",this.render.bind(this))}},{key:"closeErrorMessage",value:function(){this.model.set("show_message",!1)}},{key:"slideView",value:function(){var e=this;this.model.get("show_message")?(this.$el.addClass("slide-up"),this.model.set("timeout",setTimeout(function(){e.model.set("show_message",!1),e.model.unset("timeout")},5e3))):(this.model.get("timeout")&&(clearTimeout(this.model.get("timeout")),this.model.unset("timeout")),this.$el.removeClass("slide-up"))}},{key:"onRender",value:function(){this.slideView()}}]),t}(s);p.prototype.events={"click .js-close-message":"closeErrorMessage"},p.prototype.template=l;var m=function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return _inherits(s,e),_createClass(s,[{key:"initialize",value:function(e){var t=e.attributes;this.createModel(t||{}),this.createValidators(this.validations),this.listenTo(this.model,"change:previous_view",this.render.bind(this))}},{key:"addValidator",value:function(e){this.removeValidator(e.id);var t=new d({model:e,errorMessage:this.errorMessage,el:this.$("#error-"+e.id)});this.inputErrors[e.id]=t}},{key:"createModel",value:function(e){var t={};if(e.gotoHref&&"#"!=e.gotoHref)t={goto:e.gotoHref,qs:e.queryString};else{t.goto=window.location.pathname;var i=window.location.search;i&&(t.qs=i.substr(1))}this.model=new o.Model(n.extend({valid:!1,loading:!1,previous_view:!1,cta:this.cta},t,this.getDefaultFields(e)))}},{key:"createValidators",value:function(e){this.validators=new r(e),this.errorMessage=new o.Model({message:"",show_message:!1}),this.inputErrors={}}},{key:"executeCaptcha",value:function(e,t){if(this.model.get("captcha-skip-code"))return void e();if(this.captcha)this.captcha.reset();else{var n=this.cid+"-captcha";this.$(t).html('<div id="'+n+'"></div>'),this.captcha=CreateCaptcha(n,e,{size:"invisible"})}this.captcha.execute()}},{key:"getCaptchaData",value:function(e){var t={};return this.model.get("captcha-skip-code")?(n.extend(t,{"captcha-skip-code":this.model.get("captcha-skip-code")}),this.model.unset("captcha-skip-code")):this.captcha&&n.extend(t,this.captcha.getResponseParameters(e,!0)),t}},{key:"getDefaultFields",value:function(){return{}}},{key:"getSubmitData",value:function(){return{}}},{key:"onBeforeDestroy",value:function(){n.values(this.inputErrors).forEach(function(e){return e.remove()})}},{key:"onError",value:function(e){var t=this,o=e.responseJSON,i="Submit failed. Please try again.";o=o||{},o.skip_code&&this.setModelSkipCode(o.skip_code),o.errors&&n.forOwn(o.errors,function(e,n){var o=null;e.length&&(o=e[0]),t.validators.get(n)?t.validators.get(n).set({submit_message:o,show_error:!0}):i=o}),this.model.set("loading",!1),this.errorMessage.set({message:i,show_message:!0})}},{key:"onRender",value:function(){var e=this,t=new u({el:this.$(".account-submit"),model:this.model});t.render();var n=new p({el:this.$(".error-box"),model:this.errorMessage});n.render(),this.validators.each(function(t){return e.addValidator(t)})}},{key:"onSubmit",value:function(e){if(e&&e.preventDefault(),this.validate())return this.errorMessage.set({message:"",show_message:!1}),this.model.set("loading",!0),this.captchaRequired?void this.executeCaptcha(this.submitRequest.bind(this),".account-captcha"):void this.submitRequest()}},{key:"onSuccess",value:function(e){this.model.set("loading",!1)}},{key:"removeValidator",value:function(e){this.inputErrors[e]&&(this.inputErrors[e].remove(),delete this.inputErrors[e])}},{key:"setModelSkipCode",value:function(e){var t=this;e=e||this.model.get("extra_skip_codes"),e&&e.length&&(this.model.set("captcha-skip-code",e.pop()),this.model.set("extra_skip_codes",e),setTimeout(function(){t.model.unset("captcha-skip-code"),t.model.unset("extra_skip_codes")},1e3*(i.SKIP_CODE_SECONDS-60)))}},{key:"submitRequest",value:function(e){var o=this.getSubmitData();n.extend(o,this.getCaptchaData(e)),t.ajax({data:o,type:"POST",url:this.url,dataType:"json",headers:_defineProperty({},a.headerKey,a.getCsrf()),error:this.onError.bind(this),success:this.onSuccess.bind(this)})}},{key:"updateModel",value:function(e){var n=t(e.target);this.model.set(n.attr("name"),n.val()),this.validate()}},{key:"updateCheckbox",value:function(e){var n=t(e.target);this.model.set(n.attr("name"),n.is(":checked")),this.validate()}},{key:"updateMessaging",value:function(e){var n=t(e.target);this.validate([n.attr("name")])}},{key:"validate",value:function(e){var t=this.validators.validate(this.model,e);return this.model.set("valid",t),t}}]),s}(s);return m.prototype.className="account-view",m.prototype.events={input:"updateModel","change input:checkbox":"updateCheckbox","blur input":"updateMessaging",submit:"onSubmit"},m.prototype.tagName="form",m.prototype.template=!1,m.prototype.validations=[],m}),define("lib/hbTemplate!account/templates/AccountSignup.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<% if (previous_view) { %>\n<div class="account-back-arrow js-previous">\n  <i class="hb hb-chevron-left"></i>\n</div>\n<% } %>\n<div class="account-captcha"></div>\n<div class="checkbox">\n  <input type="checkbox" name="subscribe" value="true" <% if (subscribe) { %>checked<% } %>>\n  <label for="">Notify me about Humble Bundle promotions. (You may unsubscribe from the newsletter at any time)</label>\n</div>\n<div class="account-information account-fine-print">\n  I <% if (countryCode == \'US\') { %>am 13 years of age or older and <% } %>understand and agree to this website\'s <a href="/terms">Terms</a> and <a href="/privacy">Privacy Policy</a>.\n</div>\n<div class="account-input-group">\n  <div class="suggestion-popup"></div>\n  <label for="" class="account-label">Email</label>\n  <input type="email" name="email" value="<%= email %>" class="account-input">\n  <div id="error-email" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<div class="account-input-group">\n  <label for="" class="account-label">Password</label>\n  <input type="password" name="password" value="<%= password %>" class="account-input">\n  <div id="error-password" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<div class="account-information account-support">\n  <a href="https://support.humblebundle.com/hc/en-us/requests/new" target="_blank">Contact Support</a>\n</div>\n<div class="account-submit"></div>\n<div class="error-box"></div>\n'.replace(/xSTATIC_URLx/g,t)}()}),define("lib/hbTemplate!account/templates/InputSuggestion.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'Did you mean <span class="js-email-suggestion email-suggestion"><%= address %>@<strong><%= domain %></strong></span>?\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/SignUpView",["require","lib/jquery/full","lib/lodash","backbone","util/main","lib/email-validation","common/DOMLessView","account/BaseAccountView","hbtemplate!./templates/AccountSignup.html","hbtemplate!./templates/InputSuggestion.html"],function(e){"use strict";var t=e("lib/jquery/full"),n=e("lib/lodash"),o=e("backbone"),i=e("util/main"),s=e("lib/email-validation"),a=e("common/DOMLessView"),r=e("account/BaseAccountView"),c=e("hbtemplate!./templates/AccountSignup.html"),l=e("hbtemplate!./templates/InputSuggestion.html"),u=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"initialize",value:function(e){var t=e.$input,n=e.formModel;this.$input=t,this.formModel=n,this.listenTo(this.formModel,"change:email",this.fadeOut.bind(this))}},{key:"fadeOut",value:function(){var e=this;this.$el.parent().fadeOut(function(){return e.remove()})}},{key:"setSuggestion",value:function(){this.$input.val(this.model.get("full")),this.formModel.set("email",this.model.get("full"))}}]),t}(a);u.prototype.events={"click .js-email-suggestion":"setSuggestion"},u.prototype.template=l;var d=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,e),_createClass(n,[{key:"getDefaultFields",value:function(e){var t=window.models&&window.models.request.country_code,n=!("CA"===t||e.is_eu_country);return{countryCode:t,subscribe:n,email:null,password:null}}},{key:"recommendDomain",value:function(e){var n=this,i=t(e.target);i.mailcheck({domains:s.MAILCHECK_DOMAINS,suggested:function(e,t){var i=new o.Model(t),s=new u({model:i,$input:e,formModel:n.model}).render();n.$(".suggestion-popup").html(s.$el),n.$(".suggestion-popup").fadeIn()}})}},{key:"getSubmitData",value:function(){var e=this.model.attributes,t=e.subscribe,n=e.email,o=e.password,i=e.goto,s=e.qs;return{subscribe:t,email:n,password:o,goto:i,qs:s}}},{key:"onSuccess",value:function(e){e=e||{},i.redirectInDomain(e.goto||"/")}}]),n}(r);return d.prototype.captchaRequired=!0,d.prototype.cta="Sign up",d.prototype.events=n.extend({"change input[type=email]":"recommendDomain"},r.prototype.events),d.prototype.template=c,d.prototype.url="/signup",d.prototype.validations=[{id:"email",validation:s.isValidEmail,message:"Invalid Email"},{id:"password",validation:function(e){return e&&e.length>3},message:"Password must be at least 4 characters"}],d});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/SendSmsView",["require","lib/lodash","util/csrfUtils","account/BaseAccountView"],function(e){"use strict";var t=e("lib/lodash"),n=e("util/csrfUtils"),o=e("account/BaseAccountView"),i=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,e),_createClass(o,[{key:"initialize",value:function(e){var t=e.errorMessage;this.errorMessage=t}},{key:"onSendSmsClick",value:function(e){e.preventDefault(),this.model.get("loading")||(this.$text=$(e.target),this.$text.html("Sending...."),this.model.set("loading",!0),this.executeCaptcha(this.sendSms.bind(this),".sms-captcha"))}},{key:"sendSms",value:function(e){var o=this,i=arguments,s=_defineProperty({},n.headerKey,n.getCsrf()),a=t.cloneDeep(this.model.attributes);t.extend(a,this.getCaptchaData(e)),$.ajax({headers:s,data:a,url:"/user/authy/send-sms",type:"POST",dataType:"json"}).success(function(e){var t="SMS sent! Please enter your code.";o.errorMessage.set({message:t,show_message:!0}),o.setModelSkipCode(e.skip_code)}).error(function(){o.onError(i)}).always(function(){o.$text.html("Resend SMS"),o.model.set("loading",!1)})}}]),o}(o);return i.prototype.events={"click .js-send-sms":"onSendSmsClick"},i}),define("lib/hbTemplate!account/templates/TwoFactor.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="account-captcha"></div>\n<div class="account-input-group">\n  <div class="suggestion-popup"></div>\n  <label for="" class="account-label"><%= twofactor_type === \'authy\' ? \'Authy Code\' : \'Google Authenticator\' %></label>\n  <input type="text" name="code" value="<%= code %>" class="account-input">\n  <div id="error-code" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<% if (twofactor_type === \'authy\') { %>\n  <div class="account-information account-support account-support-split sms-view">\n    <span class="js-send-sms">Send SMS</span>\n    <div class="sms-captcha"></div>\n    <a href="https://support.humblebundle.com/hc/en-us/articles/202421374" target="_blank">Help</a>\n  </div>\n<% } else { %>\n  <div class="account-information account-support">\n    <a href="https://support.humblebundle.com/hc/en-us/articles/202421374" target="_blank">Help</a>\n  </div>\n<% } %>\n<div class="account-submit"></div>\n<div class="error-box"></div>\n'.replace(/xSTATIC_URLx/g,t);
}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/TwoFactorView",["require","util/main","account/BaseAccountView","account/SendSmsView","hbtemplate!./templates/TwoFactor.html"],function(e){"use strict";var t=e("util/main"),n=e("account/BaseAccountView"),o=e("account/SendSmsView"),i=e("hbtemplate!./templates/TwoFactor.html"),s=function(e){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return _inherits(i,e),_createClass(i,[{key:"initialize",value:function(e){var t=e.attributes;this.model=t.model,this.model.set({valid:!1,loading:!1,cta:this.cta}),this.createValidators(this.validations)}},{key:"getSubmitData",value:function(){var e=this.model.attributes,t=e.username,n=e.password,o=e.code,i=e.qs,s=e.goto;return{username:t,password:n,code:o,qs:i,goto:s}}},{key:"onRender",value:function(){"authy"===this.model.get("twofactor_type")&&new o({model:this.model,el:this.$(".sms-view"),errorMessage:this.errorMessage}),n.prototype.onRender.apply(this)}},{key:"onSuccess",value:function(e){e=e||{},t.redirectInDomain(e.goto||"/")}}]),i}(n);return s.prototype.captchaRequired=!0,s.prototype.cta="Authenticate",s.prototype.template=i,s.prototype.url="/processlogin",s.prototype.validations=[{id:"code",validation:function(e){return!!e},message:"Code Required"}],s}),define("lib/hbTemplate!account/templates/Login.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<% if (previous_view) { %>\n<div class="account-back-arrow js-previous">\n  <i class="hb hb-chevron-left"></i>\n</div>\n<% } %>\n<% if (free_copy) { %>\n<div class="account-information">\n  You must be logged into a Humble Bundle account to redeem your free copy of <%= free_copy %>\n</div>\n<% } %>\n<div class="account-captcha"></div>\n<div class="account-input-group">\n  <div class="suggestion-popup"></div>\n  <label for="" class="account-label">Email</label>\n  <input type="email" name="username" value="<%= username %>" class="account-input">\n  <div id="error-username" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<div class="account-input-group">\n  <label for="" class="account-label">Password</label>\n  <input type="password" name="password" value="<%= password %>" class="account-input">\n  <div id="error-password" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<div class="account-information account-support">\n  <span class="js-password-reset">Forgot Password?</span>\n</div>\n<div class="account-submit"></div>\n<div class="error-box"></div>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/LoginView",["require","backbone","util/main","account/BaseAccountView","account/TwoFactorView","hbtemplate!./templates/Login.html"],function(e){"use strict";var t=e("backbone"),n=e("util/main"),o=e("account/BaseAccountView"),i=e("account/TwoFactorView"),s=e("hbtemplate!./templates/Login.html"),a=function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return _inherits(s,e),_createClass(s,[{key:"getDefaultFields",value:function(e){var t=e.free_copy;return{username:null,password:null,free_copy:t}}},{key:"getSubmitData",value:function(){var e=this.model.attributes,t=e.username,n=e.password,o=e.goto,i=e.qs;return{username:t,password:n,goto:o,qs:i}}},{key:"onError",value:function(e){var n=e.responseJSON;if(n&&n.two_factor_required){this.setModelSkipCode(n.skip_code);var s={username:this.model.get("username"),password:this.model.get("password"),goto:this.model.get("goto"),qs:this.model.get("qs"),code:null,active_view:"twofactor",twofactor_type:n.twofactor_type,extra_skip_codes:this.model.get("extra_skip_codes"),"captcha-skip-code":this.model.get("captcha-skip-code"),use_modal_model:!0};if(this.modal)this.modal.set(s);else if(this.$parentEl){var a=new i({attributes:{model:new t.Model(s)}});this.$parentEl.html(a.render().el),this.remove()}}else o.prototype.onError.apply(this,arguments),n&&n.errors&&n.errors.username&&this.errorMessage.set({message:n.errors.username[0],show_message:!0})}},{key:"onRender",value:function(){this.$el.attr("novalidate",!0),o.prototype.onRender.apply(this)}},{key:"onSuccess",value:function(e){e=e||{},n.redirectInDomain(e.goto||"/")}}]),s}(o);return a.prototype.captchaRequired=!0,a.prototype.cta="Log in",a.prototype.template=s,a.prototype.url="/processlogin",a.prototype.validations=[{id:"username",validation:function(e){return!!e},message:"Email Required"},{id:"password",validation:function(e){return!!e},message:"Password Required"}],a}),define("lib/hbTemplate!account/templates/HumbleGuard.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="account-captcha"></div>\n<div class="account-information">\n  <h1>Verify account</h1>\n  It looks like you are accessing your Humble Bundle account from an unfamiliar browser.\n  For your protection, we need to verify that this computer is yours.\n  We\'ve sent a code to the email address attached to this account.\n</div>\n<div class="account-input-group">\n  <label for="" class="account-label">Code</label>\n  <input type="text" name="code" value="<%= code %>" class="account-input">\n  <div id="error-code" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<div class="account-information account-support account-support-split js-email-view">\n  <div class="js-resend-code"><span>Resend Code</span></div>\n  <div class="email-captcha"></div>\n  <div><a href="https://support.humblebundle.com/hc/en-us/requests/new" target="_blank">Contact Support</a></div>\n</div>\n<div class="account-submit"></div>\n<div class="error-box"></div>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/HumbleGuardView",["require","lib/jquery/full","lib/lodash","util/csrfUtils","util/main","account/BaseAccountView","hbtemplate!./templates/HumbleGuard.html"],function(e){"use strict";var t=e("lib/jquery/full"),n=(e("lib/lodash"),e("util/csrfUtils")),o=e("util/main"),i=e("account/BaseAccountView"),s=e("hbtemplate!./templates/HumbleGuard.html"),a=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,e),_createClass(o,[{key:"initialize",value:function(e){var t=e.errorMessage;this.errorMessage=t}},{key:"onSendEmailClick",value:function(e){e.preventDefault(),this.model.get("loading")||(this.$text=t(e.target),this.$text.html("Resending...."),this.model.set("loading",!0),this.executeCaptcha(this.sendEmail.bind(this),".email-captcha"))}},{key:"sendEmail",value:function(e){var o=this,i=_defineProperty({},n.headerKey,n.getCsrf());t.ajax({type:"POST",url:"/user/humbleguard?resend=1",headers:i}).success(function(e){var t="Code Resent";o.errorMessage.set({message:t,show_message:!0}),o.setModelSkipCode(e.skip_code)}).error(function(){var e="Slow Down! Please wait 24 hours before trying again.";o.errorMessage.set({message:e,show_message:!0})}).always(function(){o.$text.html("Resend Code"),o.model.set("loading",!1)})}}]),o}(i);a.prototype.events={"click .js-resend-code":"onSendEmailClick"};var r=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getDefaultFields",value:function(e){return{code:null}}},{key:"getSubmitData",value:function(){var e=this.model.attributes,t=e.code,n=e.goto,o=e.qs;return{code:t,goto:n,qs:o}}},{key:"onRender",value:function(){new a({model:this.model,el:this.$(".js-email-view"),errorMessage:this.errorMessage}),i.prototype.onRender.apply(this)}},{key:"onSuccess",value:function(e){this.successCallback?(this.successCallback(),this.modal.set("close",!0)):o.redirectInDomain(e.goto||"/")}},{key:"onBeforeDestroy",value:function(){this.destroyCallback&&this.destroyCallback(),i.prototype.onBeforeDestroy.call(this)}}]),t}(i);return r.prototype.captchaRequired=!0,r.prototype.cta="Verify",r.prototype.url="/user/humbleguard",r.prototype.validations=[{id:"code",validation:function(e){return!!e},message:"Please enter your code"}],r.prototype.template=s,r}),define("lib/hbTemplate!account/templates/PasswordConfirmation.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="account-captcha"></div>\n<div class="account-information">\n  <h1>Confirm Password</h1>\n  For security reasons, please enter your current password.\n</div>\n<div class="account-input-group">\n  <label for="" class="account-label">Password</label>\n  <input type="password" name="password" value="<%= password %>" class="account-input">\n  <div id="error-password" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<% if (two_factor_required) { %>\n  <div class="account-input-group">\n    <div class="suggestion-popup"></div>\n    <label for="" class="account-label"><%= twofactor_type === \'authy\' ? \'Authy Code\' : \'Google Authenticator\' %></label>\n    <input type="text" name="code" value="<%= code %>" class="account-input">\n    <div id="error-code" class="error-triangle"><i class="hb hb-alert"></i></div>\n  </div>\n  <% if (twofactor_type === \'authy\') { %>\n    <div class="account-information account-support account-support-split sms-view">\n      <span class="js-send-sms">Send SMS</span>\n      <div class="sms-captcha"></div>\n      <a href="https://support.humblebundle.com/hc/en-us/articles/202421374" target="_blank">Help</a>\n    </div>\n  <% } else { %>\n    <div class="account-information account-support">\n      <a href="https://support.humblebundle.com/hc/en-us/articles/202421374" target="_blank">Help</a>\n    </div>\n  <% } %>\n<% } else { %>\n  <div class="account-information account-support">\n    <div><a href="https://support.humblebundle.com/hc/en-us/requests/new" target="_blank">Contact Support</a></div>\n  </div>\n<% } %>\n<div class="account-submit"></div>\n<div class="error-box"></div>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/PasswordConfirmationView",["require","lib/jquery/full","util/csrfUtils","util/main","account/BaseAccountView","account/SendSmsView","hbtemplate!./templates/PasswordConfirmation.html"],function(e){"use strict";var t=(e("lib/jquery/full"),e("util/csrfUtils"),e("util/main"),e("account/BaseAccountView")),n=e("account/SendSmsView"),o=e("hbtemplate!./templates/PasswordConfirmation.html"),i=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,e),_createClass(o,[{key:"getDefaultFields",value:function(e){var t=e.two_factor_required,n=e.twofactor_type;return{two_factor_required:t,twofactor_type:n,password:null,code:null}}},{key:"getSubmitData",value:function(){var e=this.model.attributes,t=e.password,n=e.code;return{password:t,code:n}}},{key:"onRender",value:function(){"authy"===this.model.get("twofactor_type")&&new n({model:this.model,el:this.$(".sms-view"),errorMessage:this.errorMessage}),t.prototype.onRender.apply(this)}},{key:"onSuccess",value:function(){this.successCallback&&this.successCallback(),this.modal.set("close",!0)}}]),o}(t);return i.prototype.captchaRequired=!0,i.prototype.cta="Confirm",i.prototype.url="/user/confirm-password",i.prototype.validations=[{id:"password",validation:function(e){return!!e},message:"Please enter your password"}],i.prototype.template=o,i}),define("lib/hbTemplate!account/templates/PasswordReset.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<% if (previous_view) { %>\n<div class="account-back-arrow js-previous">\n  <i class="hb hb-chevron-left"></i>\n</div>\n<% } %>\n<div class="account-captcha"></div>\n<div class="account-information">\n  We\'ll send a password reset link to your account\'s email address.\n</div>\n<div class="account-input-group">\n  <label for="" class="account-label">Email</label>\n  <input type="email" name="email" value="<%= email %>" class="account-input">\n  <div id="error-email" class="error-triangle"><i class="hb hb-alert"></i></div>\n</div>\n<div class="account-information account-support">\n  <a href="https://support.humblebundle.com/hc/en-us/requests/new" target="_blank">Contact Support</a>\n</div>\n<div class="account-submit"></div>\n<div class="error-box"></div>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/PasswordResetView",["require","lib/email-validation","account/BaseAccountView","hbtemplate!./templates/PasswordReset.html"],function(e){"use strict";var t=e("lib/email-validation"),n=e("account/BaseAccountView"),o=e("hbtemplate!./templates/PasswordReset.html"),i=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getDefaultFields",value:function(){return{email:null}}},{key:"getSubmitData",value:function(){var e=this.model.attributes.email;return{email:e}}},{key:"onSuccess",value:function(e){this.modal&&this.modal.set({active_view:"reset-confirmation",email:this.model.get("email"),use_modal_model:!0})}}]),t}(n);return i.prototype.captchaRequired=!0,i.prototype.cta="Reset Password",i.prototype.url="/user/forgot",i.prototype.validations=[{id:"email",validation:t.isValidEmail,message:"Invalid Email"}],i.prototype.template=o,i}),define("lib/hbTemplate!account/templates/LoginConfirmation.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="account-success">\n  <h1>Welcome Back!</h1>\n</div>\n<button type="button" name="button" class="button large account-cta green js-close-modal">Done</button>\n'.replace(/xSTATIC_URLx/g,t)}()}),define("lib/hbTemplate!account/templates/SignUpConfirmation.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="account-success">\n  <h1>Thank you!</h1>\n  <p>\n    Your account has been successfully created! A confirmation email was sent to\n    <strong><%= email %></strong>\n  </p>\n  <p>\n    You can edit your account settings by visiting your <a href="/user/settings">user settings page</a>.\n  </p>\n</div>\n<div class="account-information account-support">\n  <a href="https://support.humblebundle.com/hc/en-us/requests/new" target="_blank">Contact Support</a>\n</div>\n<button type="button" name="button" class="button large account-cta green js-close-modal">Done</button>\n'.replace(/xSTATIC_URLx/g,t)}()}),define("lib/hbTemplate!account/templates/ResetConfirmation.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="account-success">\n  <h1>Password Reset</h1>\n  <p>\n    Your password has been successfully reset! A confirmation email was sent to\n    <strong><%= email %></strong>\n  </p>\n  <p>\n    This email may take a few minutes to arrive in your inbox.\n  </p>\n</div>\n<div class="account-information account-support">\n  <a href="https://support.humblebundle.com/hc/en-us/requests/new" target="_blank">Contact Support</a>\n</div>\n<button type="button" name="button" class="button large account-cta green js-close-modal">Done</button>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/EmailConfirmationView",["require","common/DOMLessView","hbtemplate!./templates/LoginConfirmation.html","hbtemplate!./templates/SignUpConfirmation.html","hbtemplate!./templates/ResetConfirmation.html"],function(e){"use strict";var t=e("common/DOMLessView"),n=e("hbtemplate!./templates/LoginConfirmation.html"),o=e("hbtemplate!./templates/SignUpConfirmation.html"),i=e("hbtemplate!./templates/ResetConfirmation.html"),s=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"initialize",value:function(e){var t=e.attributes;this.model=t.model}}]),t}(t);s.prototype.className="account-view account-confirmation";var a=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),t}(s);a.prototype.template=n;var r=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),t}(s);r.prototype.template=o;var c=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),t}(s);return c.prototype.template=i,{LoginConfirmationView:a,ResetConfirmationView:c,SignUpConfirmationView:r}}),define("lib/hbTemplate!account/templates/Modal.html",function(){return function(){var e="www.humblebundle.com"===window.location.hostname,t=e?"https://humblebundle-a.akamaihd.net":"";return'<div class="account-modal-outer">\n  <div class="top-bar">\n    <div>\n      <img src="xSTATIC_URLx/static/hashed/6b381fb0a8470825c2ab43057420a078c3897c6d.svg" class="logo">\n    </div>\n    <div class="close-modal js-close-modal">\n      <i class="hb hb-times"/>\n    </div>\n  </div>\n  <div class="account-modal-inner"></div>\n</div>\n'.replace(/xSTATIC_URLx/g,t)}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();define("account/Modal",["require","lib/jquery/full","lib/lodash","backbone","lib/backbone.modal","util/main","account/AccountStartView","account/SignUpView","account/LoginView","account/HumbleGuardView","account/PasswordConfirmationView","account/PasswordResetView","account/TwoFactorView","account/EmailConfirmationView","hbtemplate!./templates/Modal.html"],function(e){"use strict";var t=e("lib/jquery/full"),n=e("lib/lodash"),o=e("backbone"),i=(e("lib/backbone.modal"),e("util/main")),s=e("account/AccountStartView"),a=e("account/SignUpView"),r=e("account/LoginView"),c=e("account/HumbleGuardView"),l=e("account/PasswordConfirmationView"),u=e("account/PasswordResetView"),d=e("account/TwoFactorView"),p=e("account/EmailConfirmationView"),m=e("hbtemplate!./templates/Modal.html"),h=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,e),_createClass(n,[{key:"initialize",value:function(){this.model=new o.Model,this.previousViews=[],this.listenTo(this.model,"change:active_view",this.updateView.bind(this)),this.listenTo(this.model,"change:close",this.closeView.bind(this))}},{key:"beforeSubmit",value:function(e){return this.currentView.onSubmit(e),!1}},{key:"closeView",value:function(){this.model.get("close")&&this.destroy()}},{key:"setActive",value:function(){this.currentView.modal=this.model}},{key:"triggerView",value:function(e){o.Modal.prototype.triggerView.call(this,e),this.previousView&&(this.doNotPushPrevious||this.previousViews.push(this.previousView.constructor),this.previousView.remove()),this.currentView.model&&this.currentView.model.set("previous_view",!!this.previousViews.length),this.doNotPushPrevious=!1}},{key:"updateView",value:function(){var e={name:this.model.get("active_view")};this.model.get("use_modal_model")&&(this.attributes.model=this.model),this.openAt(e)}},{key:"beforeCancel",value:function(){this.model.get("goto")&&i.redirectInDomain(this.model.get("goto"))}},{key:"navigateBack",value:function(){this.previousViews.length&&(this.doNotPushPrevious=!0,this.openAt({view:this.previousViews.pop()}))}},{key:"onRender",value:function(){this.attributes&&this.attributes.isMobile&&t("html, body").addClass("fixed-height")}},{key:"onShow",value:function(){var e=this.$("input[type=text], input[type=email], input[type=password]");e.length&&e[0].focus(),"AccountStartView"===this.currentView.constructor.name&&this.$(".account-modal-outer").addClass("account-reveal-background-image")}},{key:"onDestroy",value:function(){this.attributes&&this.attributes.isMobile&&t("html, body").removeClass("fixed-height")}}]),n}(o.Modal);return h.prototype.cancelEl=".js-close-modal",h.prototype.events={"click .js-previous":"navigateBack"},h.prototype.prefix="account-bbm",h.prototype.template=n.template(m),h.prototype.viewContainer=".account-modal-inner",h.prototype.views={"account-start":{view:s,name:"account-start"},"click .js-account-signup":{view:a,name:"signup",onActive:"setActive"},"click .js-account-login":{view:r,name:"login",onActive:"setActive"},guard:{view:c,name:"guard",onActive:"setActive"},"click .js-password-reset":{view:u,name:"reset",onActive:"setActive"},"password-confirmation":{view:l,name:"password-confirmation",onActive:"setActive"},"login-confirmation":{view:p.LoginConfirmationView,name:"login-confirmation"},"signup-confirmation":{view:p.SignUpConfirmationView,name:"signup-confirmation"},"reset-confirmation":{view:p.ResetConfirmationView,name:"reset-confirmation"},twofactor:{view:d,name:"twofactor",onActive:"setActive"}},function(e){var n=e.name,o=e.attributes,i=e.successCallback,s=e.destroyCallback;o=o||{};var a=new h({attributes:o});a.render({name:n}),a.currentView.successCallback=i,a.currentView.destroyCallback=s,t("#site-modal").html(a.$el)}}),define("remindMe/remindMe",["require","backbone","lib/backbone.modal","jquery","lib/lodash","hbtemplate!./templates.html","util/templating","util/loadCss","text!./css_dist/remindMe.css","util/main","util/csrfUtils","account/Modal"],function(e){"use strict";var t=e("backbone"),n=(e("lib/backbone.modal"),e("jquery")),o=e("lib/lodash"),i=e("hbtemplate!./templates.html"),s=e("util/templating");n("body").append(n(i));var a=e("util/loadCss"),r=e("text!./css_dist/remindMe.css"),c=e("util/main"),l=e("util/csrfUtils"),u=e("account/Modal");a(r);var d=function(){window._gaTrackEvent&&_gaTrackEvent.apply(null,arguments)},p=t.Modal.extend({prefix:"generic-bbm",template:o.template(n("#remind-me-modal-template").html()),submitEl:".js-remindme",cancelEl:".js-close",submit:function(){this.trigger("submit")}}),m=t.View.extend({initialize:function(e){this.productMachineName=e.productMachineName,this.productHumanName=e.productHumanName,this.isLoggedIn=e.isLoggedIn,this.isReminded=e.isReminded,this.isMonthly=e.isMonthly,this.postBody={product_machine_name:this.productMachineName},this.postBody[l.formKey]=l.getCsrf(),c.getQueryParam("remindme")&&this.showModal()},events:{"click .js-remind-me-button":"remindMeButton","click .js-close-message":"closeMessage"},render:function(){this.$el.html(s.renderTemplateId("remind-me-button-template",{isReminded:this.isReminded}))},showModal:function(){var e=t.Model.extend({}),o=new e({humanName:this.productHumanName,isLoggedIn:this.isLoggedIn,isReminded:this.isReminded,isMonthly:this.isMonthly}),i=new p({model:o});this.listenTo(i,"submit",this.remindMeButton.bind(this,!0)),n("#site-modal").html(i.render().el)},showProcessing:function(){this.$el.html(s.renderTemplateId("remind-me-processing-template"))},remindMeButton:function(e){e=e||!1,this.isReminded?this.unremind(e):this.isLoggedIn?this.remind(e):u({name:"login",attributes:window.modal_attributes})},closeMessage:function(){this.render()},remind:function(e){d("Remind Me","Reminder Set"+(e?" from Modal":""),this.productMachineName),this.showProcessing();var t=this;n.post("/bundle/remindme",n.extend({action:"add"},this.postBody)).success(function(e){e.success?(t.isReminded=!0,t.render()):(t.render(),"toosoon"==e.msg?t.showMessage("remind-me-toosoon-template"):t.showMessage("remind-me-fail-template"))}).error(function(){t.showMessage("remind-me-fail-template")})},unremind:function(e){d("Remind Me","Reminder Removed"+(e?" from Modal":""),this.productMachineName),this.showProcessing();var t=this;n.post("/bundle/remindme",n.extend({action:"remove"},this.postBody)).success(function(e){e.success?(t.isReminded=!1,t.render()):(t.render(),t.showMessage("remind-me-fail-template"))}).error(function(){t.showMessage("remind-me-fail-template")})},showMessage:function(e){this.$(".js-remind-me-message-holder").html(s.renderTemplateId("remind-me-message-template")),this.$(".js-remind-me-message-text").html(s.renderTemplateId(e))}});return function(e,t,o,i,s,a,r){var c=o.end-60*a*60,l=new Date(1e3*c);if(!(l<new Date)){var u=new m({productMachineName:e,productHumanName:t,isLoggedIn:i,isReminded:s,isMonthly:r});n(".remind-me-holder").append(u.$el),u.render()}}});
//# sourceMappingURL=remindMe.js.map